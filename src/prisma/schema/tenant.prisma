model Workspace {
    id        String   @id @default(cuid())
    name      String
    slug      String   @unique
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    members       Member[]
    organizations Organization[]
}

model Member {
    id          String        @id @default(cuid())
    userId      String
    workspaceId String
    role        WorkspaceRole

    user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)
    workspace Workspace @relation(fields: [workspaceId], references: [id], onDelete: Cascade)

    @@unique([userId, workspaceId])
}

enum WorkspaceRole {
    OWNER
    ADMIN
    MEMBER
}

model Organization {
    id          String   @id @default(cuid())
    workspaceId String
    name        String
    slug        String   @unique
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt

    workspace Workspace           @relation(fields: [workspaceId], references: [id])
    staff     OrganizationStaff[]
}

model OrganizationStaff {
    id             String           @id @default(cuid())
    userId         String
    organizationId String
    role           OrganizationRole

    user         User         @relation(fields: [userId], references: [id])
    organization Organization @relation(fields: [organizationId], references: [id])

    @@unique([userId, organizationId])
}

enum OrganizationRole {
    MANAGER
    EMPLOYEE
    VIEWER
}
